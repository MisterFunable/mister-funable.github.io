<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Enhanced SEO Meta Tags -->
  <title>Undefined Collectibles - Your Collector's Digital Notebook</title>
  <meta name="description" content="A collector's digital notebook featuring 1/6 scale dolls, Metal Build figures, resin collectibles, and hobby guides. Browse 2500+ products, expert tips, and AI companion Undefined.">
  <meta name="keywords" content="collectibles, 1/6 scale dolls, metal build, resin figures, doll collection, anime figures, bjd dolls, hobby guides, figure collecting, undefined collectibles">
  <meta name="author" content="Mister Funable">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  <meta name="bingbot" content="index, follow">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://mydollinventory.com/">
  
  <!-- Enhanced Open Graph Meta Tags -->
  <meta property="og:title" content="Undefined Collectibles - Your Collector's Digital Notebook">
  <meta property="og:description" content="A collector's digital notebook featuring 1/6 scale dolls, Metal Build figures, resin collectibles, and hobby guides. Browse 2500+ products with AI companion Undefined.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mydollinventory.com/">
  <meta property="og:image" content="https://mydollinventory.com/assets/images/iratsutoya-style/pointing.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Undefined Collectibles - Digital Notebook">
  <meta property="og:site_name" content="Undefined Collectibles">
  <meta property="og:locale" content="en_US">
  
  <!-- Enhanced Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Undefined Collectibles - Your Collector's Digital Notebook">
  <meta name="twitter:description" content="A collector's digital notebook featuring 1/6 scale dolls, Metal Build figures, resin collectibles, and hobby guides. Browse 2500+ products with AI companion Undefined.">
  <meta name="twitter:image" content="https://mydollinventory.com/assets/images/iratsutoya-style/pointing.png">
  <meta name="twitter:image:alt" content="Undefined Collectibles - Digital Notebook">
  <meta name="twitter:site" content="@misterfunable">
  <meta name="twitter:creator" content="@misterfunable">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="theme-color" content="#D4AF37">
  <meta name="msapplication-TileColor" content="#D4AF37">
  <meta name="application-name" content="Undefined Collectibles">
  <meta name="apple-mobile-web-app-title" content="Undefined Collectibles">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  
  <!-- Favicon and Icons -->
  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/assets/icons/favicon/apple-touch-icon.png">
  <link rel="shortcut icon" href="/assets/icons/favicon/favicon.ico">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://www.google-analytics.com">
  <link rel="preconnect" href="https://www.googletagmanager.com">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Special+Gothic+Condensed+One&family=Caveat:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind (Play CDN) - Preflight disabled to preserve existing styles -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      corePlugins: { preflight: false },
      theme: {
        extend: {
          colors: {
            brand: {
              gold: '#D4AF37',
              accent: '#f39c12',
              text: '#2C2C2C',
              bg: '#ffffff'
            }
          },
          fontFamily: {
            heading: ['Special Gothic Condensed One', 'sans-serif']
          }
        }
      }
    };
  </script>
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/navbar-modern.css">
  <link rel="stylesheet" href="css/landing-modern.css">
  <link rel="stylesheet" href="css/footer-modern.css">
  
  <!-- Preload Critical Resources -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Special+Gothic+Condensed+One&display=swap">
  <link rel="preload" href="/components/navbar.html" as="fetch" crossorigin>
  <link rel="preload" href="assets/images/iratsutoya-style/pointing.png" as="image" fetchpriority="high">
  
  <!-- Google Analytics 4 -->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RJ7GFZ6R5Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-RJ7GFZ6R5Q');
  </script>

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Undefined Collectibles",
    "alternateName": "A Collector's Digital Notebook",
    "url": "https://mydollinventory.com",
    "description": "A collector's digital notebook for dolls, figures, and collectibles with guides, reviews, and AI companion",
    "publisher": {
      "@type": "Organization",
      "name": "Mister Funable",
      "url": "https://mydollinventory.com"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://mydollinventory.com/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "mainEntity": {
      "@type": "ItemList",
      "name": "Doll Collection Categories",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "1/6 Scale Dolls",
          "url": "https://mydollinventory.com/one-sixth.html"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Resin Figures",
          "url": "https://mydollinventory.com/inventory/resin.html"
        }
      ]
    }
  }
  </script>
  <!-- Preload critical resources to prevent FOUC -->
  <!-- Removed duplicate font and navbar preload -->
  <style>
    /* Critical CSS to prevent layout shift */
    #navbar-placeholder {
      min-height: 70px;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(20px);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }
    
    /* Scroll Down Button */
    .scroll-down-btn {
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      z-index: 10;
    }
    
    .scroll-down-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateX(-50%) translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }
    
    .scroll-down-btn:active {
      transform: translateX(-50%) translateY(-1px);
    }
    
    .scroll-arrow {
      color: #ffffff;
      transition: transform 0.3s ease;
    }
    
    .scroll-down-btn:hover .scroll-arrow {
      transform: translateY(2px);
    }
    
    /* Bounce animation */
    .scroll-down-btn {
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-10px);
      }
      60% {
        transform: translateX(-50%) translateY(-5px);
      }
    }
    
  </style>
</head>

<body>
  <a href="#main-content" class="skip-to-content">Skip to main content</a>
  <div id="navbar-placeholder"></div>

  <!-- Hero Section -->
  <section class="hero-section relative flex items-center justify-center w-full min-h-[calc(100vh-70px)]" id="main-content">
            <!-- Mascot -->
        <div class="hero-mascot select-none animate">
          <img src="assets/images/iratsutoya-style/pointing.png" alt="Site Mascot pointing at doll collection" class="mascot-image" width="300" height="300" decoding="async" fetchpriority="high"
               data-normal="assets/images/iratsutoya-style/pointing.png"
               data-hover="assets/images/iratsutoya-style/pointing-smile.png"
               data-click="assets/images/iratsutoya-style/pointing-angry-1.png">
        </div>

        <!-- Spanish/Chilean-specific mascot (appears from the right) -->
        <div class="hero-mascot-right select-none es-mascot-container" style="display:none;">
          <img src="assets/images/iratsutoya-style/chilean-dress.png" alt="Mascot in Chilean dress" class="mascot-image es-mascot" width="300" height="300" decoding="async"
               data-normal="assets/images/iratsutoya-style/chilean-dress.png"
               data-hover="assets/images/iratsutoya-style/chilean-dress.png"
               data-click="assets/images/iratsutoya-style/chilean-dress.png">
        </div>

        <!-- Japan-specific mascot (appears from the right) -->
        <div class="hero-mascot-right select-none jp-mascot-container" style="display:none;">
          <img src="assets/images/iratsutoya-style/yukata-1.png" alt="Mascot in Japanese yukata" class="mascot-image jp-mascot" width="300" height="300" decoding="async"
               data-normal="assets/images/iratsutoya-style/yukata-1.png"
               data-hover="assets/images/iratsutoya-style/yukata-2.png"
               data-click="assets/images/iratsutoya-style/yukata-3.png"
               data-yukata-1="assets/images/iratsutoya-style/yukata-1.png"
               data-yukata-2="assets/images/iratsutoya-style/yukata-2.png"
               data-yukata-3="assets/images/iratsutoya-style/yukata-3.png"
               data-yukata-4="assets/images/iratsutoya-style/yukata-4.png"
               data-yukata-5="assets/images/iratsutoya-style/yukata-5.png"
               data-yukata-6="assets/images/iratsutoya-style/yukata-6.png"
               onerror="this.src='assets/images/iratsutoya-style/pointing.png'">
        </div>
    
    <div class="hero-content max-w-5xl mx-auto text-center px-4 md:px-6">
      <h1 class="hero-title font-heading text-5xl md:text-6xl text-[#2c3e50]">
        <span class="hero-main block" data-lang-en="Undefined Collectibles" data-lang-jp="Undefinedコレクション" data-lang-es="Colecciones Indefinidas">Undefined Collectibles</span>
        <span class="hero-subtitle block text-2xl md:text-3xl mt-3 opacity-80" data-lang-en="A collector's digital notebook" data-lang-jp="コレクターのデジタルノート" data-lang-es="El cuaderno digital de un coleccionista">A collector's digital notebook</span>
      </h1>
      <p class="hero-subtitle mt-3 text-lg md:text-xl text-white/90" data-lang-en="Notes, FAQs, and beginner guides for niche hobbies"
         data-lang-jp="ニッチな趣味のためのメモ、FAQ、初心者ガイド"
         data-lang-es="Notas, preguntas frecuentes y guías para principiantes sobre hobbies de nicho">
        Notes, FAQs, and beginner guides for niche hobbies
      </p>
      <div class="hero-stats mt-6 flex items-center justify-center gap-6" aria-live="polite">
        <div class="stat-item flex flex-col items-center">
          <span class="stat-number text-3xl font-semibold text-[#D4AF37]">
            <span class="digit" data-final="2">0</span>
            <span class="digit" data-final="5">0</span>
            <span class="digit" data-final="0">0</span>
            <span class="digit" data-final="0">0</span>
            <span>+</span>
          </span>
          <span class="stat-label text-sm uppercase tracking-wide text-[#ffffff]/70" data-lang-en="Products" data-lang-es="Productos">Products</span>
        </div>
        <div class="stat-divider w-px h-8 bg-black/10"></div>
        <div class="stat-item flex flex-col items-center">
          <span class="stat-number text-3xl font-semibold text-[#D4AF37]">
            <span class="digit" data-final="1">0</span>
            <span class="digit" data-final="5">0</span>
            <span class="digit" data-final="0">0</span>
            <span>+</span>
          </span>
          <span class="stat-label text-sm uppercase tracking-wide text-[#ffffff]/70" data-lang-en="By Brands" data-lang-es="Por Marcas">Brands</span>
        </div>
        <div class="stat-divider w-px h-8 bg-black/10"></div>
        <div class="stat-item flex flex-col items-center">
          <span class="stat-number text-3xl font-semibold text-[#D4AF37]">
            <span class="digit" data-final="5">0</span>
          </span>
          <span class="stat-label text-sm uppercase tracking-wide text-[#ffffff]/70" data-lang-en="Guides" data-lang-es="Guías">Guides</span>
        </div>
      </div>
    </div>
    
    <!-- Scroll Down Button -->
    <div class="scroll-down-btn" onclick="scrollToCollections()">
      <svg class="scroll-arrow" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>
  </section>

  <!-- Collections Section -->
  <section id="collections" class="collections-section min-h-screen flex items-center py-16" style="margin-top: -3rem;">
    <div class="container max-w-7xl mx-auto px-4 md:px-6 w-full">
      <div class="section-header text-center mb-12">
        <h2 class="section-title font-heading text-4xl md:text-5xl text-[#2c3e50]" data-lang-en="Collections" data-lang-jp="コレクション" data-lang-es="Colecciones">Collections</h2>
        <div class="section-divider mx-auto mt-4 h-1 w-20 rounded"></div>
      </div>

      <div class="collections-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="collection-card relative bg-cover bg-center rounded-xl overflow-hidden shadow-lg transition hover:shadow-2xl" data-bg="assets/images/1-6-dolls.jpg">
          <a href="/one-sixth" class="card-link block h-full">
            <div class="card-overlay absolute inset-0 bg-black/30"></div>
            <div class="card-content relative z-10 p-8 flex flex-col justify-center min-h-[420px]">
              <h3 class="card-title text-white text-2xl md:text-3xl font-semibold drop-shadow mb-3" data-lang-en="1/6 Scale Dolls" data-lang-jp="1/6スケールドール" data-lang-es="Muñecas Escala 1/6">1/6 Scale Dolls</h3>
              <p class="card-description text-white/90 mt-2 text-base leading-relaxed" data-lang-en="1/6 scale dolls, bodies, and accessories"
                 data-lang-jp="1/6スケールドール、ボディ、アクセサリー"
                 data-lang-es="Muñecas escala 1/6, cuerpos y accesorios">
                1/6 scale dolls, bodies, and accessories
              </p>
              <div class="card-footer flex items-center justify-between mt-4 text-white/90">
                <span class="card-count text-sm font-medium">2500+ Items</span>
                <span class="card-arrow text-xl">→</span>
              </div>
            </div>
          </a>
        </div>

        <div class="collection-card relative bg-cover bg-center rounded-xl overflow-hidden shadow-lg transition hover:shadow-2xl" data-bg="assets/images/1-6-ryza.jpg">
          <a href="/inventory/resin" class="card-link block h-full">
            <div class="card-overlay absolute inset-0 bg-black/30"></div>
            <div class="card-content relative z-10 p-8 flex flex-col justify-center min-h-[420px]">
              <h3 class="card-title text-white text-2xl md:text-3xl font-semibold drop-shadow mb-3" data-lang-en="Resin Figures" data-lang-jp="レジンフィギュア" data-lang-es="Figuras de Resina">Resin Figures</h3>
              <p class="card-description text-white/90 mt-2 text-base leading-relaxed" data-lang-en="Premium resin figures and collectibles"
                 data-lang-jp="プレミアムレジンフィギュアとコレクティブル"
                 data-lang-es="Figuras de resina premium y coleccionables">
                Premium resin figures and collectibles
              </p>
              <div class="card-footer flex items-center justify-between mt-4 text-white/90">
                <span class="card-count text-sm font-medium">5500+ Items</span>
                <span class="card-arrow text-xl">→</span>
              </div>
            </div>
          </a>
        </div>

        <div class="collection-card relative bg-cover bg-center rounded-xl overflow-hidden shadow-lg transition hover:shadow-2xl" data-bg="assets/images/1-1-dolls.jpg">
          <a href="/one-one" class="card-link block h-full">
            <div class="card-overlay absolute inset-0 bg-black/30"></div>
            <div class="card-content relative z-10 p-8 flex flex-col justify-center min-h-[420px]">
              <h3 class="card-title text-white text-2xl md:text-3xl font-semibold drop-shadow mb-3" data-lang-en="1/1 Scale Dolls" data-lang-jp="1/1スケールドール" data-lang-es="Muñecas Escala 1/1">1/1 Scale Dolls</h3>
              <p class="card-description text-white/90 mt-2 text-base leading-relaxed" data-lang-en="Life-size dolls and premium collectibles"
                 data-lang-jp="等身大ドールとプレミアムコレクティブル"
                 data-lang-es="Muñecas de tamaño real y coleccionables premium">
                Life-size dolls and premium collectibles
              </p>
              <div class="card-footer flex items-center justify-between mt-4 text-white/90">
                <span class="card-count text-sm font-medium">3 Categories</span>
                <span class="card-arrow text-xl">→</span>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Include footer -->
  <div id="footer-placeholder"></div>


  <script src="js/navbar-loader.js" defer></script>
  <script src="js/navbar-scroll.js" defer></script>
  <script src="js/language-switcher.js" defer></script>
  <script src="js/footer-loader.js" defer></script>
  <script src="js/clean-urls.js" defer></script>
  <script>
    // Scroll to collections function
    function scrollToCollections() {
      const collectionsSection = document.getElementById('collections');
      if (collectionsSection) {
        collectionsSection.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    }

    // Make hero section clickable with keyboard support
    const heroSection = document.getElementById('heroSection');
    if (heroSection) {
      // Keyboard accessibility
      heroSection.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          scrollToCollections();
        }
      });

      // Prevent links, buttons, and mascot images inside hero from triggering the section click
      const interactiveElements = heroSection.querySelectorAll('a, button, .mascot-image, .scroll-down-btn');
      interactiveElements.forEach(el => {
        el.addEventListener('click', (e) => {
          e.stopPropagation();
        });
      });
    }
    
    // Load background images for collection cards
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.collection-card').forEach(card => {
        const bgUrl = card.getAttribute('data-bg');
        if (bgUrl) {
          card.style.backgroundImage = `url('${bgUrl}')`;
        }
      });
      
      // Mascot image switching functionality
      const mascotImage = document.querySelector('.hero-mascot .mascot-image');
      const clMascotWrapper = document.querySelector('.hero-mascot-right');
      const clMascotImage = document.querySelector('.cl-mascot');
      if (mascotImage) {
        const normalSrc = mascotImage.dataset.normal;
        const hoverSrc = mascotImage.dataset.hover;
        const clickSrc = mascotImage.dataset.click;
        let isClickSequenceActive = false;
        let clickTimers = [];
        const clothesOffImages = [
          'assets/images/iratsutoya-style/pointing-clothes-off-1.png',
          'assets/images/iratsutoya-style/pointing-clothes-off-2.png',
          'assets/images/iratsutoya-style/pointing-clothes-off-3.png'
        ];
        const clothesThresholds = [5, 8, 10]; // total consecutive clicks
        let rapidClickCount = 0;
        let rapidClickResetTimer = null;
        const CLICK_RESET_MS = 3000;
        
        // Hover effect
        mascotImage.addEventListener('mouseenter', function() {
          if (isClickSequenceActive) return;
          this.src = hoverSrc;
        });
        
        mascotImage.addEventListener('mouseleave', function() {
          if (isClickSequenceActive) return;
          this.src = normalSrc;
        });
        
        // Click effect
        mascotImage.addEventListener('click', function() {
          // Track rapid consecutive clicks regardless of current image
          rapidClickCount += 1;
          if (rapidClickResetTimer) clearTimeout(rapidClickResetTimer);
          rapidClickResetTimer = setTimeout(() => { rapidClickCount = 0; }, CLICK_RESET_MS);

          // Check for clothes-off easter egg thresholds
          const stageIndex = clothesThresholds.indexOf(rapidClickCount);
          if (stageIndex !== -1) {
            // Trigger clothes-off image, overriding any running sequence
            clickTimers.forEach(t => clearTimeout(t));
            clickTimers = [];
            isClickSequenceActive = true;
            mascotImage.src = clothesOffImages[stageIndex];
            mascotImage.classList.add('mascot-clicked');
            clickTimers.push(setTimeout(() => {
              mascotImage.src = normalSrc;
              mascotImage.classList.remove('mascot-clicked');
              isClickSequenceActive = false;
              // After completing the 3rd stage, reset the counter so the sequence can restart
              if (stageIndex === clothesOffImages.length - 1) {
                rapidClickCount = 0;
              }
            }, 4500));
            return;
          }

          // Normal angry click sequence if not already running
          if (isClickSequenceActive) {
            // Still count clicks during running sequence, but don't start another normal animation
            return;
          }
          isClickSequenceActive = true;
          this.src = clickSrc; // angry-1
          this.classList.add('mascot-clicked');

          // Clear any previous timers
          clickTimers.forEach(t => clearTimeout(t));
          clickTimers = [];

          // Slower sequence: 1.5s -> angry-2, 3.0s -> angry-3, 4.5s -> back to normal
          clickTimers.push(setTimeout(() => {
            mascotImage.src = 'assets/images/iratsutoya-style/pointing-angry-2.png';
          }, 1500));

          clickTimers.push(setTimeout(() => {
            mascotImage.src = 'assets/images/iratsutoya-style/pointing-angry-3.png';
          }, 3000));

          clickTimers.push(setTimeout(() => {
            mascotImage.src = normalSrc;
            mascotImage.classList.remove('mascot-clicked');
            isClickSequenceActive = false;
          }, 4500));
        });
      }

      // Chile-specific fight image cycle and 4-click transition logic
      if (clMascotImage) {
        let fightCount = 0;
        // Probe repository for how many fight images exist by attempting to load sequentially until one fails
        // To avoid too many requests up-front, lazily discover on first click
        let discoveredCount = 0;
        let discovering = false;
        let clClickCount = 0;
        let clTransitionActive = false;
        let clTransitionTimer = null;
        let clTransitionInterval = null;
        const baseSrc = clMascotImage.getAttribute('src');

        function preload(src) {
          const i = new Image();
          i.src = src;
        }

        function discoverImages(maxProbe = 10) {
          return new Promise((resolve) => {
            if (discovering || discoveredCount > 0) { resolve(discoveredCount); return; }
            discovering = true;
            let i = 1;
            function tryNext() {
              if (i > maxProbe) { discovering = false; resolve(discoveredCount); return; }
              const url = `${clMascotImage.dataset.fightPrefix}${i}${clMascotImage.dataset.fightExt}`;
              const test = new Image();
              test.onload = () => { discoveredCount = i; preload(url); i++; tryNext(); };
              test.onerror = () => { discovering = false; resolve(discoveredCount); };
              test.src = url + `?v=${Date.now()}`; // bust cache during probe
            }
            tryNext();
          });
        }

        function startFourClickTransition() {
          if (clTransitionActive) return;
          clTransitionActive = true;
          // Rapidly cycle through available fight images for 5 seconds
          if (discoveredCount > 0) {
            let index = 1;
            clTransitionInterval = setInterval(() => {
              clMascotImage.src = `${clMascotImage.dataset.fightPrefix}${index}${clMascotImage.dataset.fightExt}`;
              index = (index % discoveredCount) + 1;
            }, 400);
          } else {
            // No fight images found; do a simple click animation
            clMascotImage.classList.add('mascot-clicked');
          }
          clTransitionTimer = setTimeout(() => {
            if (clTransitionInterval) { clearInterval(clTransitionInterval); clTransitionInterval = null; }
            clMascotImage.src = baseSrc;
            clMascotImage.classList.remove('mascot-clicked');
            clTransitionActive = false;
          }, 5000);
        }

        clMascotImage.addEventListener('click', async () => {
          clClickCount += 1;

          if (discoveredCount === 0) {
            await discoverImages(10);
            // Preload first image if available
            if (discoveredCount > 0) {
              preload(`${clMascotImage.dataset.fightPrefix}1${clMascotImage.dataset.fightExt}`);
            }
          }

          // Every 4 clicks, trigger transition and auto-revert after 5 seconds
          if (!clTransitionActive && clClickCount % 4 === 0) {
            startFourClickTransition();
            return;
          }

          // Regular single-step cycle when not in transition
          if (!clTransitionActive && discoveredCount > 0) {
            fightCount = (fightCount % discoveredCount) + 1;
            clMascotImage.src = `${clMascotImage.dataset.fightPrefix}${fightCount}${clMascotImage.dataset.fightExt}`;
          }
        });
      }

      // Japan-specific mascot interaction (yukata)
      const jpMascotImage = document.querySelector('.jp-mascot');
      if (jpMascotImage) {
        const normalSrc = jpMascotImage.dataset.normal;
        const hoverSrc = jpMascotImage.dataset.hover;
        const clickSrc = jpMascotImage.dataset.click;
        let isJpClickActive = false;

        // Hover effect
        jpMascotImage.addEventListener('mouseenter', function() {
          if (isJpClickActive) return;
          this.src = hoverSrc;
        });

        jpMascotImage.addEventListener('mouseleave', function() {
          if (isJpClickActive) return;
          this.src = normalSrc;
        });

        // Click effect - show happy face for 2 seconds
        jpMascotImage.addEventListener('click', function() {
          if (isJpClickActive) return;
          isJpClickActive = true;
          this.src = clickSrc;
          this.classList.add('mascot-clicked');

          setTimeout(() => {
            jpMascotImage.src = normalSrc;
            jpMascotImage.classList.remove('mascot-clicked');
            isJpClickActive = false;
          }, 2000);
        });
      }

      // Digit scrolling animation - Yu-Gi-Oh! countdown effect
      function animateDigits() {
        // Get all stat items directly
        const statItems = document.querySelectorAll('.stat-item');
        
        const statGroups = [
          { element: statItems[0], finalValue: 2500, duration: 1000 }, // Products: 2 seconds
          { element: statItems[1], finalValue: 150, duration: 1000 },  // Brands: 2 seconds  
          { element: statItems[2], finalValue: 5, duration: 1000 }    // Access: 1 second
        ];
        
        let currentGroupIndex = 0;
        
        function animateGroup(group) {
          const digits = group.element.querySelectorAll('.digit');
          
          const finalValue = group.finalValue;
          const duration = group.duration;
          const interval = 5; // 10ms interval for fast countdown
          
          // Convert final value to array of digits (e.g., 2500 -> [2,5,0,0])
          const finalDigits = finalValue.toString().padStart(digits.length, '0').split('').map(Number);
          
          // Start all digits at 9
          digits.forEach(digit => {
            digit.textContent = '9';
          });
          
          // Animate each digit from left to right, counting down from 9 to target
          let currentDigitIndex = 0; // Start from leftmost digit
          
          function animateDigit() {
                         if (currentDigitIndex >= digits.length) {
               // All digits completed, move to next group
               currentGroupIndex++;
               if (currentGroupIndex < statGroups.length) {
                 setTimeout(() => animateGroup(statGroups[currentGroupIndex]), 10);
               }
               return;
             }
            
            const digit = digits[currentDigitIndex];
            const targetValue = finalDigits[currentDigitIndex];
            let currentValue = 9;
            
            const digitTimer = setInterval(() => {
              if (currentValue >= targetValue) {
                digit.textContent = currentValue;
                currentValue--;
              } else {
                                 clearInterval(digitTimer);
                 // Move to next digit (right)
                 currentDigitIndex++;
                 setTimeout(animateDigit, 50); // Small pause between digits
              }
            }, interval);
          }
          
          // Start with the rightmost digit
          animateDigit();
        }
        
        // Start with the first group (Products)
        if (statGroups.length > 0) {
          animateGroup(statGroups[0]);
        } else {
          console.log('No stat groups found!');
        }
      }
      
      // Two-phase animation: first fade-in, then count
      function startDigitAnimation() {
        const statItems = document.querySelectorAll('.stat-item');
        
        // Phase 1: Sequential fade-in for each stat group
        statItems.forEach((statItem, index) => {
          setTimeout(() => {
            statItem.classList.add('fade-in');
            console.log(`Stat item ${index + 1} faded in`);
          }, index * 45); // 800ms delay between each stat group
        });
        
        // Phase 2: Start counting after all fade-ins are complete
        const totalFadeInTime = (statItems.length - 1) * 600 + 600; // Total fade-in time
        setTimeout(() => {
          animateDigits();
        }, totalFadeInTime);
      }
      
      // Start digit animation after page loads
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReducedMotion) {
        setTimeout(startDigitAnimation, 500);
      } else {
        // Set digits to final values immediately for reduced motion users
        const statItems = document.querySelectorAll('.stat-item');
        const finals = [2500, 150, 5];
        statItems.forEach((item, idx) => {
          const digits = item.querySelectorAll('.digit');
          const finalString = String(finals[idx] || 0).padStart(digits.length, '0');
          digits.forEach((digitEl, i) => { digitEl.textContent = finalString[i]; });
          item.classList.add('fade-in');
        });
      }
      
      // Track page view and test event with Google Analytics
      if (typeof gtag !== 'undefined') {
        console.log('Google Analytics is loaded!');
        
        // Send page view
        gtag('event', 'page_view', {
          page_title: 'My Doll Inventory - Home',
          page_location: window.location.href,
          content_group1: 'Homepage',
          content_group2: 'Collection Database'
        });
        
        // Send test event
        gtag('event', 'test_event', {
          event_category: 'Testing',
          event_label: 'Analytics Test',
          value: 1
        });
      } else {
        console.error('Google Analytics (gtag) is not loaded!');
      }
    });
  </script>

  <script>
    // Toggle mascots when language changes
    function toggleMascotsForLanguage(lang) {
      const leftMascot = document.querySelector('.hero-mascot');
      const esMascot = document.querySelector('.es-mascot-container');
      const jpMascot = document.querySelector('.jp-mascot-container');

      if (!leftMascot) return;

      // Hide all mascots first
      leftMascot.style.display = 'none';
      if (esMascot) esMascot.style.display = 'none';
      if (jpMascot) jpMascot.style.display = 'none';

      // Show the appropriate mascot based on language
      if (lang === 'jp' && jpMascot) {
        // Show Japanese yukata mascot
        jpMascot.style.display = 'block';
        jpMascot.classList.remove('animate');
        requestAnimationFrame(() => jpMascot.classList.add('animate'));
      } else if ((lang === 'es' || lang === 'cl') && esMascot) {
        // Show Chilean dress mascot for Spanish
        esMascot.style.display = 'block';
        esMascot.classList.remove('animate');
        requestAnimationFrame(() => esMascot.classList.add('animate'));
      } else {
        // Show default mascot for English
        leftMascot.style.display = 'block';
        leftMascot.classList.remove('animate');
        requestAnimationFrame(() => leftMascot.classList.add('animate'));
      }
    }
    // Expose globally so language-switcher can call it
    window.toggleMascotsForLanguage = toggleMascotsForLanguage;
    // React to language change events
    window.addEventListener('language-changed', (e) => {
      const lang = (e && e.detail && e.detail.lang) || (localStorage.getItem('preferredLanguage') || 'en');
      toggleMascotsForLanguage(lang);
    });
    // Ensure initial state after switcher initializes
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const savedLanguage = localStorage.getItem('preferredLanguage') || 'en';
        toggleMascotsForLanguage(savedLanguage);
      }, 200);
    });
  </script>
</body>

</html>